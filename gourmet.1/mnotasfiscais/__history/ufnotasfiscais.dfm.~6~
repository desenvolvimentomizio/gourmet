object fnotasfiscais: Tfnotasfiscais
  Left = 0
  Top = 0
  Caption = 'fnotasfiscais'
  ClientHeight = 597
  ClientWidth = 800
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  OnShow = FormShow
  PixelsPerInch = 96
  TextHeight = 13
  object info: TMemo
    Left = 80
    Top = 144
    Width = 409
    Height = 121
    Lines.Strings = (
      'info')
    TabOrder = 0
  end
  object cfg: TUniQuery
    SQL.Strings = (
      'SELECT'
      '  /*Principal*/'
      '  cfgmcfg.cfgcodigo,'
      '  cfgmcfg.cfgetdempresa,'
      ''
      '  /*Entradas*/'
      '  cfgment.cfgprouso,'
      '  cfgment.cfgtoeusofora,'
      '  cfgment.cfgtoeusointe,'
      ''
      '  /*Sa'#237'das*/'
      '  cfgmsai.cfgtoecuffora,'
      '  cfgmsai.cfgtoecufinte,'
      '  cfgmsai.cfgtoesubstnoestado,'
      '  cfgmsai.cfgtoesubstforaestado,'
      '  cfgmsai.cfgusacstnoproduto,'
      '  cfgmsai.cfgtoesubstanpnoestado,'
      '  cfgmsai.cfgtoesubstanpforaestado,'
      '  cfgmsai.cfgtoemesinte,'
      '  cfgmsai.cfgdefinetoeatendimento,'
      '  cfgmsai.cfgtoeinteproducaopropria,'
      '  cfgmsai.cfgtoeforaproducaopropria,'
      '  cfgmsai.cfgtoeintesubsprodpropria,'
      '  cfgmsai.cfgtoeforasubsprodpropria,'
      ''
      ''
      ''
      '  /*Contas a Receber*/'
      '  cfgmcre.cfgviaassinar,'
      ''
      '  /*Emiss'#227'o NFe*/'
      '  cfgmnfe.cfgviasnfe,'
      '  cfgmnfe.cfgnumeronfe,'
      '  cfgmnfe.cfgserienfe,'
      '  cfgmnfe.cfgnumeronfce,'
      '  cfgmnfe.cfgserienfce,'
      '  cfgmnfe.cfgobs1,'
      '  cfgmnfe.cfgobs2,'
      '  cfgmnfe.cfgobs3,'
      '  cfgmnfe.cfgobs4,'
      '  cfgmnfe.cfgdescrinfe,'
      '  cfgmnfe.cfgnumecertif,'
      '  cfgmnfe.cfgnumecertifa1,'
      '  cfgmnfe.cfgsenhacertificadoa1,'
      '  cfgmnfe.cfgtoken1nfce,'
      '  cfgmnfe.cfgidtokennfce,'
      '  cfgmnfe.cfgmodonfe,'
      '  cfgmnfe.cfgversao,'
      '  cfgmnfe.cfgcestativo,'
      '  cfgmnfe.cfgobs1,'
      '  cfgcertificadoa1,'
      ''
      '  '
      ''
      ''
      '  /*Email*/'
      '  cfgmnfe.cfgemailnfe,'
      '  cfgmnfe.cfgemailservidornfe,'
      '  cfgmnfe.cfgemailsenhanfe,'
      '  cfgmnfe.cfgmailportnfe,'
      '  cfgmnfe.cfgemailusatls,'
      '  cfgmsai.cfgmensagempdv,'
      '  cfgmsai.cfgprevisualizarimpressao,'
      '  cfgmsai.cfgproducaopropria,'
      '  cfgmsai.cfgtributacaoimendes,'
      ''
      ''
      ''
      ''
      '  /*SPED*/'
      '  cfgmcfg.crtcodigo,'
      '  cfgmspd.cfgcstterceiros,'
      ''
      '  /*Dados da Empresa*/'
      '  etd.etdapelido,'
      '  etd.etdidentificacao,'
      '  etd.etddoc1,'
      ''
      '  edr.ufscodigo,'
      '  edr.cddcodigo,'
      '  edr.edrinscest,'
      '  edr.edrrua,'
      '  edr.edrnumero,'
      '  edr.edrbairro,'
      '  edr.edrcep,'
      '  cdd.cddnome,'
      '  ufs.ufssigla,'
      ''
      '  etf.etftelefone,'
      '  '
      '  /*Box-e - Dom'#237'nio Sistemas*/'
      '  ctd.ctdboxedominio,'
      '  cfgmensagempdv,'
      '  cfgtrmimpfis1,'
      '  cfgtrmimpfis2,'
      '  cfgtrmtef1,'
      '  cfgtrmtef2,'
      '  cfgimpnfe1,'
      '  cfgimpnfe2,'
      '  cfgimpnfc1,'
      '  cfgimpnfc2,'
      '  cfgimpnfc3,'
      '  cfgservarqnfes,'
      '  cfg.cfgusanfc,'
      '  cfg.cfgusapdv,'
      '  ete.eteemail,'
      '  cfgctacodigopix'
      '   '
      'FROM cfgmcfg,'
      '     ufs,'
      '     etd,'
      '     cfgmnfe,'
      '     cfgment,'
      '     cfgmcre,'
      '     edr,'
      '     cfg,'
      '     cfgmspd,'
      '     etf,'
      '     cdd,'
      '     cfgmsai,'
      '     ctd,'
      '     ete'
      'WHERE cfg.cfgcodigo = ctd.cfgcodigo'
      'AND cfg.cfgcodigo = cfgmsai.cfgcodigo'
      'AND ufs.ufscodigo = edr.ufscodigo'
      'AND cfg.cfgcodigo = cfgmcfg.cfgcodigo'
      'AND cfg.cfgcodigo = cfgmcre.cfgcodigo'
      'AND etd.etdcodigo = etf.etdcodigo'
      'AND ete.etdcodigo = etd.etdcodigo and eteenvianfe=1'
      'AND etf.ttfcodigo = 1'
      'AND edr.cddcodigo = cdd.cddcodigo'
      'AND cfg.cfgcodigo = cfgment.cfgcodigo'
      'AND cfg.cfgcodigo = cfgmnfe.cfgcodigo'
      'AND etd.etdcodigo = cfgmcfg.cfgetdempresa'
      'AND etd.etdcodigo = edr.etdcodigo'
      'AND edr.tedcodigo = 1'
      'AND cfg.cfgcodigo = cfgmspd.cfgcodigo'
      'AND cfg.flacodigo = :flacodigo'
      'order by etecodigo limit 1')
    Left = 23
    Top = 20
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'flacodigo'
        Value = nil
      end>
    object cfgcfgcodigo: TIntegerField
      FieldName = 'cfgcodigo'
      Required = True
    end
    object cfgcfgservarqnfes: TStringField
      FieldName = 'cfgservarqnfes'
      Size = 100
    end
    object cfgcfgnumecertif: TStringField
      FieldName = 'cfgnumecertif'
      Size = 100
    end
    object cfgcfgetdempresa: TIntegerField
      FieldName = 'cfgetdempresa'
    end
    object cfgcfgviasnfe: TIntegerField
      FieldName = 'cfgviasnfe'
      Required = True
    end
    object cfgcfgserienfe: TStringField
      FieldName = 'cfgserienfe'
      Size = 5
    end
    object cfgcfgserienfce: TStringField
      FieldName = 'cfgserienfce'
      Size = 5
    end
    object cfgcfgdescrinfe: TIntegerField
      FieldName = 'cfgdescrinfe'
      Required = True
    end
    object cfgcfgemailnfe: TStringField
      FieldName = 'cfgemailnfe'
      Size = 50
    end
    object cfgcfgemailservidornfe: TStringField
      FieldName = 'cfgemailservidornfe'
      Size = 50
    end
    object cfgcfgemailsenhanfe: TStringField
      FieldName = 'cfgemailsenhanfe'
      Size = 50
    end
    object cfgcfgmailportnfe: TStringField
      FieldName = 'cfgmailportnfe'
      Required = True
      Size = 5
    end
    object cfgcfgemailusatls: TIntegerField
      FieldName = 'cfgemailusatls'
      Required = True
    end
    object cfgcrtcodigo: TIntegerField
      FieldName = 'crtcodigo'
      Required = True
    end
    object cfgetdapelido: TStringField
      FieldName = 'etdapelido'
      Size = 100
    end
    object cfgetdidentificacao: TStringField
      FieldName = 'etdidentificacao'
      Required = True
      Size = 50
    end
    object cfgetddoc1: TStringField
      FieldName = 'etddoc1'
    end
    object cfgufscodigo: TStringField
      FieldName = 'ufscodigo'
      Required = True
      Size = 10
    end
    object cfgcddcodigo: TStringField
      FieldName = 'cddcodigo'
      Required = True
      Size = 10
    end
    object cfgedrinscest: TStringField
      FieldName = 'edrinscest'
      Required = True
    end
    object cfgedrrua: TStringField
      FieldName = 'edrrua'
      Required = True
      Size = 50
    end
    object cfgedrnumero: TStringField
      FieldName = 'edrnumero'
      Required = True
      Size = 10
    end
    object cfgedrbairro: TStringField
      FieldName = 'edrbairro'
      Required = True
      Size = 60
    end
    object cfgedrcep: TStringField
      FieldName = 'edrcep'
      Required = True
      Size = 10
    end
    object cfgcddnome: TStringField
      FieldName = 'cddnome'
      Required = True
      Size = 50
    end
    object cfgufssigla: TStringField
      FieldName = 'ufssigla'
      Required = True
      Size = 3
    end
    object cfgetftelefone: TStringField
      FieldName = 'etftelefone'
      Required = True
    end
    object cfgcfgusanfc: TIntegerField
      FieldName = 'cfgusanfc'
    end
    object cfgcfgtoken1nfce: TStringField
      FieldName = 'cfgtoken1nfce'
      Size = 100
    end
    object cfgcfgnumecertifa1: TStringField
      FieldName = 'cfgnumecertifa1'
      Size = 100
    end
    object cfgcfgmodonfe: TIntegerField
      FieldName = 'cfgmodonfe'
    end
    object cfgcfgsenhacertificadoa1: TStringField
      FieldName = 'cfgsenhacertificadoa1'
      Size = 50
    end
    object cfgcfgidtokennfce: TStringField
      FieldName = 'cfgidtokennfce'
      Size = 6
    end
    object cfgcfgviaassinar: TIntegerField
      FieldName = 'cfgviaassinar'
    end
    object cfgcfgmensagempdv: TStringField
      FieldName = 'cfgmensagempdv'
      Size = 250
    end
    object cfgcfgtoesubstforaestado: TIntegerField
      FieldName = 'cfgtoesubstforaestado'
    end
    object cfgcfgtoesubstnoestado: TIntegerField
      FieldName = 'cfgtoesubstnoestado'
    end
    object cfgcfgprevisualizarimpressao: TIntegerField
      FieldName = 'cfgprevisualizarimpressao'
    end
    object cfgcfgversao: TStringField
      FieldName = 'cfgversao'
      Size = 10
    end
    object cfgcfgusacstnoproduto: TIntegerField
      FieldName = 'cfgusacstnoproduto'
    end
    object cfgcfgtoesubstanpnoestado: TIntegerField
      FieldName = 'cfgtoesubstanpnoestado'
    end
    object cfgcfgtoesubstanpforaestado: TIntegerField
      FieldName = 'cfgtoesubstanpforaestado'
    end
    object cfgcfgtoemesinte: TIntegerField
      FieldName = 'cfgtoemesinte'
    end
    object cfgcfgdefinetoeatendimento: TIntegerField
      FieldName = 'cfgdefinetoeatendimento'
    end
    object cfgcfgcestativo: TIntegerField
      FieldName = 'cfgcestativo'
    end
    object cfgcfgobs1: TIntegerField
      FieldName = 'cfgobs1'
    end
    object cfgcfgproducaopropria: TIntegerField
      FieldName = 'cfgproducaopropria'
    end
    object cfgcfgtoeinteproducaopropria: TIntegerField
      FieldName = 'cfgtoeinteproducaopropria'
    end
    object cfgcfgtoeforaproducaopropria: TIntegerField
      FieldName = 'cfgtoeforaproducaopropria'
    end
    object cfgcfgtoeintesubsprodpropria: TIntegerField
      FieldName = 'cfgtoeintesubsprodpropria'
    end
    object cfgcfgtoeforasubsprodpropria: TIntegerField
      FieldName = 'cfgtoeforasubsprodpropria'
    end
    object cfgcfgtributacaoimendes: TIntegerField
      FieldName = 'cfgtributacaoimendes'
    end
    object cfgcfgcertificadoa1: TBlobField
      FieldName = 'cfgcertificadoa1'
    end
    object cfgeteemail: TStringField
      FieldName = 'eteemail'
      Size = 200
    end
    object cfgctdboxedominio: TStringField
      FieldName = 'ctdboxedominio'
      Size = 200
    end
    object cfgcfgusapdv: TIntegerField
      FieldName = 'cfgusapdv'
    end
    object cfgcfgctacodigopix: TIntegerField
      FieldName = 'cfgctacodigopix'
    end
  end
  object itm: TUniQuery
    SQL.Strings = (
      'SELECT itm.cfocfop'
      '     , itm.procodigo'
      '     , pro.pronome'
      '     , pro.pronomereduzido'
      '     , pro.proncm'
      '     , itm.itmdesccomple'
      '     , itm.itmquantidade'
      '     , uni.unisimbolo'
      '     , itm.itmvalor'
      '     , itm.itmdesconto'
      '     , itm.itmtotal'
      '     , itm.itmchave'
      '     , itm.cstcodigo'
      '     , itm.icmcodigo'
      '     , itm.itmicm'
      '     , itm.itmbicm'
      '     , itm.itmaliqipi'
      '     , itm.itmbipi'
      '     , itm.itmipi'
      '     , itm.itmvlribpt'
      
        '     , pun.punqtdtrib * itm.itmquantidade                       ' +
        '                          AS punqtdtribtotal'
      
        '     , puni.unisimbolo                                          ' +
        '                          AS unisimbolotrib'
      
        '      , ROUND(((itm.itmquantidade * itm.itmvalor) * (IFNULL(tcg.' +
        'tcgaliqnac, 0) / 100)), 2) AS itmcargatrib'
      
        '     , ROUND(((itm.itmquantidade * itm.itmvalor) * (IFNULL(tcg.t' +
        'cgaliqest, 0) / 100)), 2) AS itmcargatribest'
      '     , itm.cspcodigo'
      '     , itm.csfcodigo'
      '     , itm.csicodigo'
      '     , itm.toecodigo'
      '     , if(pro.procest<>'#39#39',pro.procest, '#39#39') tcecest'
      '     , pro.tpocodigo'
      '     , pro.proproducao'
      ''
      '     , pun.punbarra '
      '     , pun.punbarrasistema'
      '     , pun.punidentificacao'
      ''
      '     , itm.itmpercreducaobaseicm'
      '     , itm.itmaliqpis'
      '     , itm.itmpis'
      '     , itm.itmbpis'
      ''
      '     , itm.itmaliqcofins'
      '     , itm.itmcofins'
      '     , itm.itmbcofins'
      '     , itm.itmfrete'
      '     , itm.itmoutras'
      
        '     , (select icmaliquotas from icm where icm.icmcodigo=itm.icm' +
        'codigo) as icmaliquota '
      '     , itm.itmbicms'
      '     , itm.itmmva'
      
        '     , (select icmaliquotas from icm where icm.icmcodigo=itm.icm' +
        'codigo) as itmaliqicms'
      '     , itm.itmicms '
      '     , itm.puncodigo'
      '     , itm.itmaliqicm'
      '     , itm.itmacrescimoav'
      ''
      ' '
      ''
      '  FROM itm'
      '  JOIN pro      ON itm.procodigo  = pro.procodigo'
      '  JOIN uni      ON itm.unicodigo  = uni.unicodigo'
      '  JOIN pun      ON itm.procodigo  = pun.procodigo'
      '               AND itm.unicodigo  = pun.unicodigo'
      '  JOIN uni puni ON pun.pununitrib = puni.unicodigo'
      '  LEFT JOIN tcg ON tcg.tcgncm     = pro.proncm'
      '  LEFT JOIN lcn      ON tcg.tcgncm     = lcn.tcgncm'
      ' WHERE pro.tpocodigo <> 9 and itm.itmquantidade>0'
      '   AND itm.meschave = :meschave'
      ' GROUP BY itm.itmchave')
    Left = 68
    Top = 20
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'meschave'
        Value = nil
      end>
    object itmitmchave: TIntegerField
      FieldName = 'itmchave'
    end
    object itmcfocfop: TStringField
      FieldName = 'cfocfop'
      Size = 5
    end
    object itmprocodigo: TIntegerField
      FieldName = 'procodigo'
    end
    object itmpronome: TStringField
      FieldName = 'pronome'
      Size = 150
    end
    object itmpronomereduzido: TStringField
      FieldName = 'pronomereduzido'
      Size = 50
    end
    object itmproncm: TStringField
      FieldName = 'proncm'
      Size = 15
    end
    object itmitmdesccomple: TStringField
      FieldName = 'itmdesccomple'
      Size = 250
    end
    object itmitmquantidade: TFloatField
      FieldName = 'itmquantidade'
    end
    object itmunisimbolo: TStringField
      FieldName = 'unisimbolo'
      Size = 6
    end
    object itmitmvalor: TFloatField
      FieldName = 'itmvalor'
    end
    object itmitmdesconto: TFloatField
      FieldName = 'itmdesconto'
    end
    object itmcstcodigo: TStringField
      FieldName = 'cstcodigo'
      Size = 3
    end
    object itmicmcodigo: TStringField
      FieldName = 'icmcodigo'
      Size = 3
    end
    object itmitmicm: TFloatField
      FieldName = 'itmicm'
    end
    object itmitmbicm: TFloatField
      FieldName = 'itmbicm'
    end
    object itmitmaliqipi: TFloatField
      FieldName = 'itmaliqipi'
    end
    object itmitmbipi: TFloatField
      FieldName = 'itmbipi'
    end
    object itmitmipi: TFloatField
      FieldName = 'itmipi'
    end
    object itmitmvlribpt: TFloatField
      FieldName = 'itmvlribpt'
    end
    object itmpunqtdtribtotal: TFloatField
      FieldName = 'punqtdtribtotal'
    end
    object itmunisimbolotrib: TStringField
      DisplayWidth = 6
      FieldName = 'unisimbolotrib'
      Size = 6
    end
    object itmitmtotal: TFloatField
      FieldName = 'itmtotal'
    end
    object itmitmcargatrib: TFloatField
      FieldName = 'itmcargatrib'
    end
    object itmitmcargatribest: TFloatField
      FieldName = 'itmcargatribest'
    end
    object itmcspcodigo: TStringField
      FieldName = 'cspcodigo'
      Size = 3
    end
    object itmcsfcodigo: TStringField
      FieldName = 'csfcodigo'
      Size = 3
    end
    object itmpunbarra: TStringField
      FieldName = 'punbarra'
    end
    object itmpunbarrasistema: TIntegerField
      FieldName = 'punbarrasistema'
    end
    object itmcsicodigo: TStringField
      FieldName = 'csicodigo'
      Size = 3
    end
    object itmtoecodigo: TIntegerField
      FieldName = 'toecodigo'
    end
    object itmtcecest: TStringField
      FieldName = 'tcecest'
      Size = 15
    end
    object itmtpocodigo: TIntegerField
      FieldName = 'tpocodigo'
    end
    object itmproproducao: TIntegerField
      FieldName = 'proproducao'
    end
    object itmitmpercreducaobaseicm: TFloatField
      FieldName = 'itmpercreducaobaseicm'
    end
    object itmitmaliqpis: TFloatField
      FieldName = 'itmaliqpis'
    end
    object itmitmpis: TFloatField
      FieldName = 'itmpis'
    end
    object itmitmbpis: TFloatField
      FieldName = 'itmbpis'
    end
    object itmitmaliqcofins: TFloatField
      FieldName = 'itmaliqcofins'
    end
    object itmitmcofins: TFloatField
      FieldName = 'itmcofins'
    end
    object itmitmbcofins: TFloatField
      FieldName = 'itmbcofins'
    end
    object itmitmfrete: TFloatField
      FieldName = 'itmfrete'
    end
    object itmitmoutras: TFloatField
      FieldName = 'itmoutras'
    end
    object itmpunidentificacao: TStringField
      FieldName = 'punidentificacao'
      Size = 30
    end
    object itmicmaliquota: TStringField
      FieldName = 'icmaliquota'
      Size = 10
    end
    object itmitmbicms: TFloatField
      FieldName = 'itmbicms'
    end
    object itmitmmva: TFloatField
      FieldName = 'itmmva'
    end
    object itmitmicms: TFloatField
      FieldName = 'itmicms'
    end
    object itmitmaliqicms: TStringField
      FieldName = 'itmaliqicms'
      Size = 10
    end
    object itmpuncodigo: TIntegerField
      FieldName = 'puncodigo'
    end
    object itmitmaliqicm: TStringField
      FieldName = 'itmaliqicm'
      Size = 10
    end
    object itmitmacrescimoav: TCurrencyField
      FieldName = 'itmacrescimoav'
    end
  end
end
