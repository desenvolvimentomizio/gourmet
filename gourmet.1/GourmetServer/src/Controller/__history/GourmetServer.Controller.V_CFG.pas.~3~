unit GourmetServer.Controller.V_CFG;

interface

Uses
  FireDAC.Phys.MySQLDef,
  FireDAC.Phys.MySQL,
  FireDAC.Phys.Intf,
  FireDAC.Phys,
  FireDAC.UI.Intf,
  FireDAC.ConsoleUI.Wait,
  Data.DB,
  FireDAC.Comp.Client,
  FireDAC.Comp.DataSet,
  Service.Connection,
  System.Json,
  System.SysUtils,
  idHashMessageDigest;

function V1BuscaCodigoCfgmnfeCfoVenda: Integer;
function v1BuscaCodigoCfgmgouCtaDelivery: Integer;


type
  TAPIError = class
  private
    Ferror: string;
  public
    property error: string read Ferror write Ferror;
  end;

implementation



function v1BuscaCodigoCfgmgouCtaDelivery: Integer;
var
  conexao:TFDconnection;
  cfgmgou:TFDQuery;

  vlcfgmgouctadelivery: Integer;
begin
  vlcfgmgouctadelivery := 0;

  if AtivaConexao(conexao)<>nil then
  begin

      cfgmgou:=TFDQuery.Create(nil);
      cfgmgou.Connection:=Conexao;
      cfgmgou.sql.Text:='select cfgmgouctadelivery form cfgmgou where cfgcodigo=1';
      cfgmgou.Open;

      if not cfgmgou.IsEmpty then
       vlcfgmgouctadelivery := cfgmgou.FieldByName('cfgmgouctadelivery').asinteger
      else
       vlcfgmgouctadelivery :=1;

  end;

  result := vlcfgmgouctadelivery;

end;



function V1BuscaCodigoCfgmnfeCfoVenda: Integer;
var
  FDAO: iDAOGeneric<TV_CFG>;
  vlcfgmgouctadelivery: Integer;
begin
  vlcfgmgouctadelivery := 0;

  FDAO := TDAOGeneric<TV_CFG>.New;

  FDAO.DAO.SQL.where('cfgcodigo=1').&End.Find;

  vlcfgmgouctadelivery := FDAO.DataSet.FieldByName('cfgtoemesinte').asinteger;
  result := vlcfgmgouctadelivery;
end;

end.
