unit GourmetServer.Controller.V_CLI;

interface

Uses

  System.Json,
  System.SysUtils,
  idHashMessageDigest,
  GourmetServer.Service.Funcoes,
  GourmetServer.Model.DAOGeneric,
  GourmetServer.Model.Entity.V_CLI;

function BuscaCodigoETD(vetftelefone: string; vetfcelular: string; veteemail: String; vetdidentificacao: string): Integer;

type
  TAPIError = class
  private
    Ferror: string;
  public
    property error: string read Ferror write Ferror;
  end;

implementation


function BuscaCodigoETD(vetftelefone: string; vetfcelular: string; veteemail: String; vetdidentificacao: string): Integer;
var
  FDAO: iDAOGeneric<TV_CLI>;
  vletdcodigo: Integer;
  VLString:string;
begin
  vletdcodigo := -1;

  FDAO := TDAOGeneric<TV_CLI>.New;
  VLString:='(etftelefone=' + QuotedStr(sonumeros(vetftelefone)) + ') or (etftelefone=' + QuotedStr(sonumeros(vetfcelular)) + ') or (eteemail=' +
    QuotedStr(veteemail) + ') and (etdidentificacao like ' +QuotedStr('%' +vetdidentificacao + '%')+')';
  FDAO.DAO.SQL.where(VLString).&End.Find;

  vletdcodigo := FDAO.DataSet.FieldByName('etdcodigo').asInteger;

  result := vletdcodigo;
end;



end.
