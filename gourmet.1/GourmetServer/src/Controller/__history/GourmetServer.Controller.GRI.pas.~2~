unit GourmetServer.Controller.GRI;

interface

Uses
  System.Json,
  System.SysUtils,
  idHashMessageDigest,
  GourmetServer.Model.DAOGeneric,
  GourmetServer.Model.Entity.GRI;

function BuscaCodigoGRIGrpCodigo(vGrpCodigo: Integer): Integer;

type
  TAPIError = class
  private
    Ferror: string;
  public
    property error: string read Ferror write Ferror;
  end;

implementation

uses
  FireDAC.Comp.Client;

function BuscaCodigoGRIGrpCodigo(vGrpCodigo: Integer): Integer;
var
  FDAO: iDAOGeneric<TGRI>;
  vltcicodigo: Integer;
begin
  vltcicodigo := 0;

  FDAO := TDAOGeneric<TGRI>.New;

  FDAO.DAO.SQL.where('grpcodigo=' + vGrpCodigo.ToString).&End.Find;

  vltcicodigo := FDAO.DataSet.FieldByName('tcicodigo').asInteger;
  result := vltcicodigo;
(FDAO.dataset as TFDQuery).Connection.connected:=false;
end;

end.
