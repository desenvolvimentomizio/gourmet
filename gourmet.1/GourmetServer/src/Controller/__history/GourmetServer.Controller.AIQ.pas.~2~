unit GourmetServer.Controller.AIQ;

interface

Uses
  System.Json,
  System.SysUtils,
  idHashMessageDigest,
  GourmetServer.Model.DAOGeneric,
  GourmetServer.Model.Entity.AIQ;

procedure Registry(App: THorse);
procedure V1Get(Req: THorseRequest; Res: THorseResponse; Next: TProc);

procedure Registry(App: THorse);
begin
  App.Get('/v1/pedido/', V1Get);
end;


procedure V1Get(Req: THorseRequest; Res: THorseResponse; Next: TProc);
var
  FDAO: iDAOGeneric<TPEDIDOAIQ>;
  a: string;
begin
  FDAO := TDAOGeneric<TPEDIDOAIQ>.New;
  FDAO.dao.sql.Fields('aiqchave, aiqpedido,   aiqstatus, aiqjson ').&End.Find;
  Res.Send<TJsonarray>(FDAO.DataSetAsJsonArray);
end;


type
  TAPIError = class
  private
    Ferror: string;
  public
    property error: string read Ferror write Ferror;
  end;

implementation


end.
