object fPrinciMizioImpressoras: TfPrinciMizioImpressoras
  Left = 0
  Top = 0
  Caption = 'Monitor de Impressoras'
  ClientHeight = 647
  ClientWidth = 600
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  OnShow = FormShow
  PixelsPerInch = 96
  TextHeight = 13
  object plCozinhaTopo: TPanel
    Left = 0
    Top = 0
    Width = 600
    Height = 34
    Align = alTop
    BorderWidth = 3
    ParentBackground = False
    TabOrder = 0
    object plHora: TPanel
      Left = 4
      Top = 4
      Width = 77
      Height = 26
      Align = alLeft
      BevelOuter = bvLowered
      Caption = '00:00:00'
      Font.Charset = DEFAULT_CHARSET
      Font.Color = clWindowText
      Font.Height = -11
      Font.Name = 'Tahoma'
      Font.Style = []
      ParentBackground = False
      ParentFont = False
      TabOrder = 0
    end
    object Button3: TButton
      Left = 521
      Top = 4
      Width = 75
      Height = 26
      Align = alRight
      Caption = 'Fechar'
      TabOrder = 1
      OnClick = Button3Click
    end
    object plCozinha: TPanel
      Left = 81
      Top = 4
      Width = 112
      Height = 26
      Align = alLeft
      BevelOuter = bvLowered
      Caption = 'Cozinha: 000000'
      Font.Charset = DEFAULT_CHARSET
      Font.Color = clWindowText
      Font.Height = -11
      Font.Name = 'Tahoma'
      Font.Style = []
      ParentBackground = False
      ParentFont = False
      TabOrder = 2
    end
    object plServidorImpressoras: TPanel
      Left = 193
      Top = 4
      Width = 112
      Height = 26
      Align = alLeft
      BevelOuter = bvLowered
      Caption = 'Servidor de Impressoras:'
      Font.Charset = DEFAULT_CHARSET
      Font.Color = clWindowText
      Font.Height = -11
      Font.Name = 'Tahoma'
      Font.Style = []
      ParentBackground = False
      ParentFont = False
      TabOrder = 3
    end
  end
  object plTopo: TPanel
    Left = 0
    Top = 34
    Width = 600
    Height = 279
    Align = alTop
    BevelOuter = bvNone
    BorderWidth = 4
    TabOrder = 1
    object sbTop: TScrollBox
      AlignWithMargins = True
      Left = 178
      Top = 14
      Width = 408
      Height = 251
      Margins.Left = 10
      Margins.Top = 10
      Margins.Right = 10
      Margins.Bottom = 10
      Align = alClient
      Color = 4259584
      ParentColor = False
      TabOrder = 0
    end
    object Panel1: TPanel
      AlignWithMargins = True
      Left = 14
      Top = 14
      Width = 144
      Height = 251
      Margins.Left = 10
      Margins.Top = 10
      Margins.Right = 10
      Margins.Bottom = 10
      Align = alLeft
      Caption = 'Panel1'
      TabOrder = 1
      object mmFilaPedidos: TMemo
        AlignWithMargins = True
        Left = 11
        Top = 41
        Width = 122
        Height = 199
        Margins.Left = 10
        Margins.Top = 10
        Margins.Right = 10
        Margins.Bottom = 10
        Align = alClient
        Color = 4227327
        Lines.Strings = (
          '')
        ScrollBars = ssVertical
        TabOrder = 0
      end
      object plTituloListaPedidos: TPanel
        AlignWithMargins = True
        Left = 4
        Top = 4
        Width = 136
        Height = 24
        Align = alTop
        Caption = 'Pedidos na Fila:'
        Padding.Left = 10
        Padding.Top = 10
        Padding.Right = 10
        Padding.Bottom = 10
        TabOrder = 1
      end
    end
  end
  object plFalhaBanco: TPanel
    Left = 0
    Top = 313
    Width = 600
    Height = 315
    Align = alClient
    BevelOuter = bvNone
    BorderWidth = 5
    TabOrder = 2
    object erros: TMemo
      AlignWithMargins = True
      Left = 15
      Top = 165
      Width = 570
      Height = 135
      Margins.Left = 10
      Margins.Top = 10
      Margins.Right = 10
      Margins.Bottom = 10
      Align = alClient
      Color = clInfoBk
      Lines.Strings = (
        'Status da(s) Impressora(s)')
      ReadOnly = True
      ScrollBars = ssVertical
      TabOrder = 0
    end
    object pedidos: TMemo
      AlignWithMargins = True
      Left = 15
      Top = 15
      Width = 570
      Height = 130
      Margins.Left = 10
      Margins.Top = 10
      Margins.Right = 10
      Margins.Bottom = 10
      Align = alTop
      Color = clGray
      Lines.Strings = (
        'pedidos')
      ReadOnly = True
      ScrollBars = ssVertical
      TabOrder = 1
    end
  end
  object mensagens: TStatusBar
    Left = 0
    Top = 628
    Width = 600
    Height = 19
    Panels = <
      item
        Width = 150
      end
      item
        Width = 150
      end
      item
        Width = 50
      end>
  end
  object Conexao: TUniConnection
    DataTypeMap = <
      item
        DBType = 210
        FieldType = ftInteger
        IgnoreErrors = True
      end
      item
        DBType = 211
        FieldType = ftInteger
        IgnoreErrors = True
      end>
    ProviderName = 'mySQL'
    Database = 'kuskao0805'
    Username = 'root'
    Server = '192.168.5.166'
    LoginPrompt = False
    Left = 32
    Top = 160
    EncryptedPassword = '87FF9BFF9EFFC6FFC8FFCCFF'
  end
  object MySQLUniProvider: TMySQLUniProvider
    Left = 40
    Top = 96
  end
  object inicializar: TTimer
    Enabled = False
    Interval = 200
    OnTimer = inicializarTimer
    Left = 87
    Top = 336
  end
  object tmVerificarPedidos: TTimer
    Enabled = False
    Interval = 3000
    OnTimer = tmVerificarPedidosTimer
    Left = 192
    Top = 336
  end
  object cfg: TUniQuery
    Connection = Conexao
    SQL.Strings = (
      
        'select cfgcodigo, cfgmgoupedidelivery, cfgmgoupedideliveryaux fr' +
        'om cfgmgou')
    Left = 208
    Top = 72
    object cfgcfgcodigo: TIntegerField
      FieldName = 'cfgcodigo'
      Required = True
    end
    object cfgcfgmgoupedidelivery: TIntegerField
      FieldName = 'cfgmgoupedidelivery'
    end
    object cfgcfgmgoupedideliveryaux: TIntegerField
      FieldName = 'cfgmgoupedideliveryaux'
    end
  end
  object czn: TUniQuery
    Connection = Conexao
    SQL.Strings = (
      
        'select cznchave from czn where cznfechamento IS null order by cz' +
        'nchave limit 1')
    Left = 250
    Top = 74
    object czncznchave: TIntegerField
      FieldName = 'cznchave'
    end
  end
  object gri: TUniQuery
    Connection = Conexao
    SQL.Strings = (
      'SELECT DISTINCT'
      '   '
      '       tci.tcicodigo'
      '     , tci.tciporta'
      
        '     , CONCAT(mit.mitidentificacao, '#39'  ['#39' ,tci.tciporta, '#39']'#39') mi' +
        'tidentificacao'
      '     , gripedidoaux'
      '  FROM tci'
      ' INNER JOIN mit ON tci.mitcodigo = mit.mitcodigo'
      ' INNER JOIN gri '
      '    ON tci.tcicodigo = gri.tcicodigo and gri.griimprimeauto=1'
      '  order by mit.mitidentificacao')
    Left = 298
    Top = 74
    object gritcicodigo: TIntegerField
      FieldName = 'tcicodigo'
    end
    object gritciporta: TStringField
      FieldName = 'tciporta'
      Size = 50
    end
    object grimitidentificacao: TStringField
      FieldName = 'mitidentificacao'
      ReadOnly = True
      Size = 104
    end
    object grigripedidoaux: TIntegerField
      FieldName = 'gripedidoaux'
    end
  end
  object grisit: TUniQuery
    Connection = Conexao
    Left = 362
    Top = 72
  end
  object tcisituacao: TUniQuery
    Connection = Conexao
    Left = 424
    Top = 73
  end
  object imm: TUniQuery
    Connection = Conexao
    SQL.Strings = (
      'SELECT DISTINCT'
      '       orc.orcchave'
      '     , orc.foacodigo'
      '     , orc.stocodigo'
      ''
      '     , orc.orcobs'
      '     , orc.orcgeralav'
      '     , gri.gricodigo'
      ''
      
        '     , IF(orc.foacodigo = 2,(SELECT rel.relarquivo FROM rel WHER' +
        'E rel.relcodigo = gri.relcompleto)'
      
        '                           ,(SELECT rel.relarquivo FROM rel WHER' +
        'E rel.relcodigo = gri.relgrupo)) relarquivo'
      
        '     , (select grpcodigo from pro where ito.procodigo=pro.procod' +
        'igo) as grpcodigo'
      '     ,imm.immchave'
      '     , imm.immnumepedido'
      '  FROM imm '
      ' INNER JOIN ito ON imm.itochave = ito.itochave'
      ' INNER JOIN pro ON pro.procodigo = ito.procodigo'
      ''
      ' INNER JOIN orc ON ito.orcchave = orc.orcchave'
      
        ' INNER JOIN gri on imm.tcicodigo = gri.tcicodigo and gri.grpcodi' +
        'go=pro.grpcodigo'
      ' '
      ' WHERE orc.stocodigo not in (1,88)'
      '  AND imm.immhoraimpresso IS NULL '
      '   AND imm.cznchave=:cznchave'
      '   AND imm.immmodo<>9'
      '   AND gri.griimprimeauto=1'
      '   AND ito.itoquantidade>0'
      '   and imm.immnumepedido<>0'
      '   and ito.stocodigo in (2,3) '
      '  ORDER BY orc.orcchave  ;'
      ''
      ''
      '/*'
      ''
      '{   '
      ' WHERE orc.stocodigo=3'
      '   AND imm.immhoraimpresso IS NULL '
      '--   AND orc.orcdataencerr is null'
      '   AND imm.cznchave=:cznchave'
      '   AND imm.immmodo<>9'
      '   AND gri.griimprimeauto=1'
      '   AND ito.itoquantidade>0'
      ''
      '  ORDER BY orc.orcchave, gripedidoaux ;'
      ''
      '*/')
    Left = 490
    Top = 74
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'cznchave'
        Value = nil
      end>
    object immorcchave: TIntegerField
      FieldName = 'orcchave'
    end
    object immfoacodigo: TIntegerField
      FieldName = 'foacodigo'
      Required = True
    end
    object immstocodigo: TIntegerField
      FieldName = 'stocodigo'
      Required = True
    end
    object immrelarquivo: TBlobField
      FieldName = 'relarquivo'
      ReadOnly = True
    end
    object immorcobs: TStringField
      FieldName = 'orcobs'
      Size = 250
    end
    object immorcgeralav: TFloatField
      FieldName = 'orcgeralav'
      Required = True
    end
    object immgricodigo: TIntegerField
      FieldName = 'gricodigo'
    end
    object immgrpcodigo: TIntegerField
      FieldName = 'grpcodigo'
    end
    object immimmchave: TIntegerField
      FieldName = 'immchave'
    end
    object immimmnumepedido: TIntegerField
      FieldName = 'immnumepedido'
    end
  end
  object ito: TUniQuery
    Connection = Conexao
    SQL.Strings = (
      'SET @orcchave =:orcchave;'
      ''
      'DROP temporary TABLE IF EXISTS tped;'
      '   '
      'CREATE temporary TABLE if not exists tped'
      '     ( id            INT NOT NULL AUTO_INCREMENT'
      '     , orcchave      INT'
      '     , immchave      INT'
      '     , immnumepedido INT '
      '     , tcicodigo     INT'
      '     , pedidoaux     INT'
      '     , itochave      INT '
      '     '
      '     , PRIMARY KEY (id)'
      '     ) ENGINE = INNODB DEFAULT charset = latin1;'
      ''
      'INSERT INTO tped'
      '  (SELECT @novachave'
      '        , timm.orcchave'
      '        , timm.immchave'
      '        , timm.immnumepedido'
      '        , timm.tcicodigo'
      '        , pedidoaux'
      '        , timm.itochave'
      '        '
      '  FROM (SELECT DISTINCT'
      '               orc.orcchave'
      '             , imm.immchave'
      '             , imm.immnumepedido'
      
        '             , IF(orc.foacodigo != 2, imm.tcicodigo, (SELECT tci' +
        'codigo'
      '                       FROM tci '
      
        '                      WHERE tci.tciprioridade = (SELECT MIN(tci.' +
        'tciprioridade) tciprioridade'
      '                                                   FROM tci'
      
        '                                                  WHERE tci.tcic' +
        'odigo IN (SELECT tcicodigo'
      
        '                                                                ' +
        '            FROM tci '
      
        '                                                                ' +
        '           WHERE tcicodigo IN (SELECT imm.tcicodigo'
      
        '                                                                ' +
        '                                 FROM imm '
      
        '                                                                ' +
        '                                INNER JOIN ito '
      
        '                                                                ' +
        '                                        ON imm.itochave = ito.it' +
        'ochave'
      
        '                                                                ' +
        '                                WHERE ito.orcchave = @orcchave))' +
        ')'
      '                       LIMIT 1 )) tcicodigo'
      '             , 0 pedidoaux '
      '             , imm.itochave'
      '          FROM imm'
      '         INNER JOIN ito ON imm.itochave = ito.itochave'
      '         INNER JOIN orc ON ito.orcchave = orc.orcchave'
      '         INNER JOIN pro ON ito.procodigo = pro.procodigo'
      '         INNER JOIN gri ON pro.grpcodigo = gri.grpcodigo'
      '         INNER JOIN grp ON pro.grpcodigo = grp.grpcodigo'
      '         WHERE orc.orcchave = @orcchave'
      '           AND orc.stocodigo NOT IN (1, 88) '
      
        '           AND ito.stocodigo NOT IN (1, 88) and ito.itoquantidad' +
        'e>0'
      '           AND imm.immhoraimpresso IS NULL '
      '           and gri.griimprimeauto=1'
      '          '
      '        UNION ALL'
      '        '
      '        SELECT DISTINCT'
      '               orc.orcchave'
      '             , imm.immchave'
      '             , imm.immnumepedido'
      '             , imm.tcicodigo'
      '             , 1 pedidoaux'
      '             , imm.itochave'
      '          FROM imm'
      '         INNER JOIN ito ON imm.itochave = ito.itochave'
      '         INNER JOIN orc ON ito.orcchave = orc.orcchave'
      '         inner join pro on ito.procodigo = pro.procodigo'
      '         INNER JOIN gri on pro.grpcodigo = gri.grpcodigo'
      '         INNER JOIN grp on pro.grpcodigo = grp.grpcodigo'
      '         WHERE orc.orcchave = @orcchave'
      '           AND orc.foacodigo = 2'
      '           AND orc.stocodigo NOT IN (1, 88)  '
      
        '           AND ito.stocodigo NOT IN (1, 88) and ito.itoquantidad' +
        'e>0 '
      '           AND imm.immhoraimpresso IS NULL '
      '           AND gri.gripedidoaux = 1 '
      '           and gri.griimprimeauto=1) timm'
      '           '
      '        INNER JOIN tci ON timm.tcicodigo = tci.tcicodigo'
      '        INNER JOIN mit ON tci.mitcodigo = mit.mitcodigo);'
      ''
      ''
      'SELECT timm.orcchave'
      '     , timm.immnumepedido'
      '     , timm.tcicodigo'
      '     , tci.tciporta'
      '     , mit.mitidentificacao '
      '     , timm.foacodigo'
      '     , timm.pedidoaux'
      '     , timm.itochave'
      '     , timm.immchave'
      '     '
      '  FROM (SELECT DISTINCT'
      '               orc.orcchave'
      '             , imm.immnumepedido'
      
        '             , IF(orc.foacodigo != 2, imm.tcicodigo, (SELECT tci' +
        'codigo'
      '                       FROM tci '
      
        '                      WHERE tci.tciprioridade = (SELECT MIN(tci.' +
        'tciprioridade) tciprioridade'
      '                                                   FROM tci'
      
        '                                                  WHERE tci.tcic' +
        'odigo IN (SELECT tcicodigo'
      
        '                                                                ' +
        '            FROM tci '
      
        '                                                                ' +
        '           WHERE tcicodigo IN (SELECT imm.tcicodigo'
      
        '                                                                ' +
        '                                 FROM imm '
      
        '                                                                ' +
        '                                INNER JOIN ito '
      
        '                                                                ' +
        '                                        ON imm.itochave = ito.it' +
        'ochave'
      
        '                                                                ' +
        '                                WHERE ito.orcchave = @orcchave))' +
        ')'
      '                       LIMIT 1 )) tcicodigo'
      '             , orc.foacodigo'
      '             , 0 pedidoaux '
      '             , imm.itochave'
      '             , imm.immchave'
      '          FROM imm'
      '         INNER JOIN ito ON imm.itochave = ito.itochave'
      '         INNER JOIN orc ON ito.orcchave = orc.orcchave'
      '         INNER JOIN pro ON ito.procodigo = pro.procodigo'
      '         INNER JOIN gri ON pro.grpcodigo = gri.grpcodigo'
      '         INNER JOIN grp ON pro.grpcodigo = grp.grpcodigo'
      '         WHERE orc.orcchave = @orcchave'
      '           AND orc.stocodigo NOT IN (1, 88)   '
      
        '           AND ito.stocodigo NOT IN (1, 88) and ito.itoquantidad' +
        'e>0'
      '           AND imm.immhoraimpresso IS NULL '
      '           and gri.griimprimeauto=1'
      '        '
      '          '
      '        UNION ALL'
      '        '
      '        SELECT DISTINCT'
      '               orc.orcchave'
      '             , imm.immnumepedido'
      '             , imm.tcicodigo'
      '             , orc.foacodigo'
      '             , 1   pedidoaux'
      '             , imm.itochave'
      '             , imm.immchave'
      '          FROM imm'
      '         INNER JOIN ito ON imm.itochave = ito.itochave'
      '         INNER JOIN orc ON ito.orcchave = orc.orcchave'
      '         inner join pro on ito.procodigo = pro.procodigo'
      '         INNER JOIN gri on pro.grpcodigo = gri.grpcodigo'
      '         INNER JOIN grp on pro.grpcodigo = grp.grpcodigo'
      '         WHERE orc.orcchave = @orcchave'
      '           AND orc.foacodigo = 2'
      '           AND orc.stocodigo NOT IN (1, 88)   '
      
        '           AND ito.stocodigo NOT IN (1, 88)  and ito.itoquantida' +
        'de>0'
      '           AND imm.immhoraimpresso IS NULL '
      '           AND gri.gripedidoaux = 1 '
      '           and gri.griimprimeauto=1) timm'
      ''
      '        INNER JOIN tci ON timm.tcicodigo = tci.tcicodigo'
      '        INNER JOIN mit ON tci.mitcodigo = mit.mitcodigo'
      'order by pedidoaux '
      '')
    Left = 202
    Top = 146
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'orcchave'
        Value = nil
      end>
    object itoorcchave: TIntegerField
      FieldName = 'orcchave'
      Required = True
    end
    object itoimmnumepedido: TIntegerField
      FieldName = 'immnumepedido'
    end
    object itotcicodigo: TIntegerField
      FieldName = 'tcicodigo'
    end
    object itotciporta: TStringField
      FieldName = 'tciporta'
      ReadOnly = True
      Size = 50
    end
    object itofoacodigo: TIntegerField
      FieldName = 'foacodigo'
      Required = True
    end
    object itopedidoaux: TIntegerField
      FieldName = 'pedidoaux'
      Required = True
    end
    object itoitochave: TIntegerField
      FieldName = 'itochave'
    end
    object itoimmchave: TIntegerField
      FieldName = 'immchave'
    end
    object itomitidentificacao: TStringField
      FieldName = 'mitidentificacao'
      ReadOnly = True
      Required = True
      Size = 50
    end
  end
  object immtempo: TUniQuery
    Connection = Conexao
    Left = 254
    Top = 144
  end
  object consulta: TUniQuery
    Connection = Conexao
    Left = 314
    Top = 144
  end
  object situacao: TUniQuery
    Connection = Conexao
    Left = 502
    Top = 232
  end
  object sqlimprime: TUniQuery
    Connection = Conexao
    SQL.Strings = (
      'SELECT  distinct gri.griimprimeauto ,'
      '     clb.fnccodigo,'
      '     gri.gripedidoaux,'
      '     imm.immchave,'
      '     gri.tcicodigo,'
      '     imm.immnumepedido'
      '  FROM imm '
      ' INNER JOIN ito ON imm.itochave = ito.itochave'
      ''
      ' INNER JOIN pro ON pro.procodigo = ito.procodigo'
      ' INNER JOIN clb ON clb.clbcodigo = imm.clbcodigo'
      '  INNER JOIN gri on gri.grpcodigo=pro.grpcodigo'
      '   inner join tci on gri.tcicodigo= tci.tcicodigo'
      ' INNER JOIN orc ON ito.orcchave = orc.orcchave'
      '  WHERE ito.itochave=:itochave'
      'order by tciprioridade desc, gri.gripedidoaux, immchave'
      '')
    Left = 282
    Top = 282
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'itochave'
        Value = nil
      end>
    object sqlimprimegriimprimeauto: TIntegerField
      FieldName = 'griimprimeauto'
    end
    object sqlimprimefnccodigo: TIntegerField
      FieldName = 'fnccodigo'
    end
    object sqlimprimegripedidoaux: TIntegerField
      FieldName = 'gripedidoaux'
    end
    object sqlimprimeimmchave: TIntegerField
      FieldName = 'immchave'
    end
    object sqlimprimetcicodigo: TIntegerField
      FieldName = 'tcicodigo'
    end
    object sqlimprimeimmnumepedido: TIntegerField
      FieldName = 'immnumepedido'
    end
  end
  object jaimpresso: TUniQuery
    Connection = Conexao
    Left = 338
    Top = 282
  end
  object vias: TUniQuery
    Connection = Conexao
    Left = 402
    Top = 282
  end
  object imw: TUniQuery
    Connection = Conexao
    SQL.Strings = (
      'SELECT'
      '  imwchave,'
      '  itochave,'
      '  imwhoranotificadopedido,'
      '  imwhorasaidadopedido,'
      '  imwhoraentregadopedido'
      'FROM imw where itochave=:itochave')
    Left = 460
    Top = 283
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'itochave'
        Value = nil
      end>
    object imwimwchave: TIntegerField
      FieldName = 'imwchave'
    end
    object imwitochave: TIntegerField
      FieldName = 'itochave'
      Required = True
    end
    object imwimwhoranotificadopedido: TDateTimeField
      FieldName = 'imwhoranotificadopedido'
    end
    object imwimwhorasaidadopedido: TDateTimeField
      FieldName = 'imwhorasaidadopedido'
    end
    object imwimwhoraentregadopedido: TDateTimeField
      FieldName = 'imwhoraentregadopedido'
    end
  end
  object itoaux: TUniQuery
    Connection = Conexao
    SQL.Strings = (
      'SET @orcchave =:orcchave;'
      'DROP temporary TABLE IF EXISTS tped;'
      '   '
      'CREATE temporary TABLE if not exists tped'
      '     ( id            INT NOT NULL AUTO_INCREMENT'
      '     , orcchave      INT'
      '     , immchave      INT'
      '     , immnumepedido INT '
      '     , tcicodigo     INT'
      '     , pedidoaux     INT'
      '     , itochave      INT '
      '     '
      '     , PRIMARY KEY (id)'
      '     ) ENGINE = INNODB DEFAULT charset = latin1;'
      ''
      'INSERT INTO tped'
      '  (SELECT DISTINCT'
      '              @chave'
      '              , orc.orcchave'
      '             , imm.immchave'
      '             , imm.immnumepedido'
      '             , gri.tcicodigo'
      '             , gri.gripedidoaux pedidoaux '
      '             , imm.itochave'
      '          FROM imm'
      '         INNER JOIN ito ON imm.itochave = ito.itochave'
      '         INNER JOIN orc ON ito.orcchave = orc.orcchave'
      '         INNER JOIN pro ON ito.procodigo = pro.procodigo'
      '         INNER JOIN gri ON pro.grpcodigo = gri.grpcodigo'
      '         INNER JOIN grp ON pro.grpcodigo = grp.grpcodigo'
      '         WHERE orc.orcchave = @orcchave'
      '           AND orc.stocodigo NOT IN (1, 88) '
      
        '           AND ito.stocodigo NOT IN (1, 88) and ito.itoquantidad' +
        'e>0'
      '           AND imm.immhoraimpressoaux IS NULL '
      '           and gri.griimprimeauto=1'
      '           AND gri.gripedidoaux=1         '
      '       );'
      ''
      ''
      ''
      ''
      ''
      'SELECT   DISTINCT'
      '               orc.orcchave'
      '             , imm.immnumepedido'
      '             , gri.tcicodigo'
      '             , orc.foacodigo'
      '             , gri.gripedidoaux pedidoaux '
      '             , imm.itochave'
      '             , imm.immchave'
      '             , tci.tciporta '
      '             , mit.mitidentificacao'
      '          FROM imm'
      '         INNER JOIN ito ON imm.itochave = ito.itochave'
      '         INNER JOIN orc ON ito.orcchave = orc.orcchave'
      '         INNER JOIN pro ON ito.procodigo = pro.procodigo'
      '         INNER JOIN gri ON pro.grpcodigo = gri.grpcodigo'
      '         INNER JOIN grp ON pro.grpcodigo = grp.grpcodigo'
      '         INNER JOIN tci ON gri.tcicodigo = tci.tcicodigo'
      '         INNER JOIN mit ON tci.mitcodigo = mit.mitcodigo'
      ''
      '         WHERE orc.orcchave = @orcchave'
      '           AND orc.stocodigo NOT IN (1, 88)   '
      
        '           AND ito.stocodigo NOT IN (1, 88) and ito.itoquantidad' +
        'e>0'
      '           AND imm.immhoraimpressoaux IS NULL '
      '   '
      '           and gri.griimprimeauto=1'
      '           AND gri.gripedidoaux=1'
      '        '
      ''
      '          '
      '       '
      ''
      ''
      '       '
      '       '
      ''
      'order by pedidoaux '
      '')
    Left = 282
    Top = 347
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'orcchave'
        Value = nil
      end>
    object itoauxorcchave: TIntegerField
      FieldName = 'orcchave'
      Required = True
    end
    object itoauximmnumepedido: TIntegerField
      FieldName = 'immnumepedido'
    end
    object itoauxtcicodigo: TIntegerField
      FieldName = 'tcicodigo'
    end
    object itoauxtciporta: TStringField
      FieldName = 'tciporta'
      ReadOnly = True
      Size = 50
    end
    object itoauxfoacodigo: TIntegerField
      FieldName = 'foacodigo'
      Required = True
    end
    object itoauxpedidoaux: TIntegerField
      FieldName = 'pedidoaux'
      Required = True
    end
    object itoauxitochave: TIntegerField
      FieldName = 'itochave'
    end
    object itoauximmchave: TIntegerField
      FieldName = 'immchave'
    end
    object itoauxmitidentificacao: TStringField
      FieldName = 'mitidentificacao'
      ReadOnly = True
      Required = True
      Size = 50
    end
  end
  object itoauxveri: TUniQuery
    Connection = Conexao
    SQL.Strings = (
      'SET @orcchave =:orcchave;'
      ''
      'DROP temporary TABLE IF EXISTS tped;'
      '   '
      'CREATE temporary TABLE if not exists tped'
      '     ( id            INT NOT NULL AUTO_INCREMENT'
      '     , orcchave      INT'
      '     , immchave      INT'
      '     , immnumepedido INT '
      '     , tcicodigo     INT'
      '     , pedidoaux     INT'
      '     , itochave      INT '
      '     , immhoraimpressoaux datetime'
      '     '
      '     , PRIMARY KEY (id)'
      '     ) ENGINE = INNODB DEFAULT charset = latin1;'
      ''
      'INSERT INTO tped'
      '  (SELECT DISTINCT'
      '              @chave'
      '              , orc.orcchave'
      '             , imm.immchave'
      '             , imm.immnumepedido'
      '             , gri.tcicodigo'
      '             , gri.gripedidoaux pedidoaux '
      '             , imm.itochave'
      
        '             , STR_TO_DATE(immhoraimpressoaux, '#39'%Y-%m-%d %H:%i:%' +
        's'#39') immhoraimpressoaux'
      '          FROM imm'
      '         INNER JOIN ito ON imm.itochave = ito.itochave'
      '         INNER JOIN orc ON ito.orcchave = orc.orcchave'
      '         INNER JOIN pro ON ito.procodigo = pro.procodigo'
      '         INNER JOIN gri ON pro.grpcodigo = gri.grpcodigo'
      '         INNER JOIN grp ON pro.grpcodigo = grp.grpcodigo'
      '         WHERE orc.orcchave = @orcchave'
      '           AND orc.stocodigo NOT IN (1, 88) '
      
        '           AND ito.stocodigo NOT IN (1, 88) and ito.itoquantidad' +
        'e>0'
      '           AND imm.immhoraimpressoaux IS NULL '
      '           and gri.griimprimeauto=1'
      '           AND gri.gripedidoaux=1         '
      '       );'
      ''
      ''
      'SELECT   DISTINCT'
      '               orc.orcchave'
      '             , imm.immnumepedido'
      '             , gri.tcicodigo'
      '             , orc.foacodigo'
      '             , gri.gripedidoaux pedidoaux '
      '             , imm.itochave'
      '             , imm.immchave'
      '             , tci.tciporta '
      
        '             , STR_TO_DATE(immhoraimpressoaux, '#39'%Y-%m-%d %H:%i:%' +
        's'#39') immhoraimpressoaux'
      '          FROM imm'
      '         INNER JOIN ito ON imm.itochave = ito.itochave'
      '         INNER JOIN orc ON ito.orcchave = orc.orcchave'
      '         INNER JOIN pro ON ito.procodigo = pro.procodigo'
      '         INNER JOIN gri ON pro.grpcodigo = gri.grpcodigo'
      '         INNER JOIN grp ON pro.grpcodigo = grp.grpcodigo'
      '         INNER JOIN tci ON gri.tcicodigo = tci.tcicodigo'
      '         INNER JOIN mit ON tci.mitcodigo = mit.mitcodigo'
      '         WHERE orc.orcchave = @orcchave'
      '           AND orc.stocodigo NOT IN (1, 88)   '
      
        '           AND ito.stocodigo NOT IN (1, 88) and ito.itoquantidad' +
        'e>0'
      '           AND imm.immhoraimpressoaux IS NULL '
      '   '
      '           and gri.griimprimeauto=1'
      '           AND gri.gripedidoaux=1'
      '        '
      ''
      '       '
      ''
      ''
      '       '
      '       '
      ''
      'order by pedidoaux '
      '')
    Left = 362
    Top = 347
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'orcchave'
        Value = nil
      end>
    object itoauxveriorcchave: TIntegerField
      FieldName = 'orcchave'
      Required = True
    end
    object itoauxveriimmnumepedido: TIntegerField
      FieldName = 'immnumepedido'
    end
    object itoauxveritcicodigo: TIntegerField
      FieldName = 'tcicodigo'
    end
    object itoauxveritciporta: TStringField
      FieldName = 'tciporta'
      ReadOnly = True
      Size = 50
    end
    object itoauxverifoacodigo: TIntegerField
      FieldName = 'foacodigo'
      Required = True
    end
    object itoauxveripedidoaux: TIntegerField
      FieldName = 'pedidoaux'
      Required = True
    end
    object itoauxveriitochave: TIntegerField
      FieldName = 'itochave'
    end
    object itoauxveriimmchave: TIntegerField
      FieldName = 'immchave'
    end
    object itoauxveriimmhoraimpressoaux: TDateTimeField
      FieldName = 'immhoraimpressoaux'
    end
  end
  object immaux: TUniQuery
    Connection = Conexao
    SQL.Strings = (
      'SELECT DISTINCT'
      '       orc.orcchave'
      '     , orc.foacodigo'
      '     , orc.stocodigo'
      ''
      '     , orc.orcobs'
      '     , orc.orcgeralav'
      '     , gri.gricodigo'
      ''
      
        '     , IF(orc.foacodigo = 2,(SELECT rel.relarquivo FROM rel WHER' +
        'E rel.relcodigo = gri.relcompleto)'
      
        '                           ,(SELECT rel.relarquivo FROM rel WHER' +
        'E rel.relcodigo = gri.relgrupo)) relarquivo'
      
        '     , (select grpcodigo from pro where ito.procodigo=pro.procod' +
        'igo) as grpcodigo'
      '     ,imm.immchave'
      '     , imm.immnumepedido'
      ''
      '  FROM imm '
      ' INNER JOIN ito ON imm.itochave = ito.itochave'
      ' INNER JOIN pro ON pro.procodigo = ito.procodigo'
      ''
      ' INNER JOIN orc ON ito.orcchave = orc.orcchave'
      '  INNER JOIN gri on gri.grpcodigo=pro.grpcodigo'
      ' '
      ' '
      '   '
      ' WHERE orc.stocodigo NOT IN (1, 88)'
      '   AND imm.immhoraimpressoaux IS NULL '
      '   AND imm.cznchave=:cznchave'
      '   AND imm.immmodo<>9'
      '   AND gripedidoaux=1'
      '   AND gri.griimprimeauto=1'
      '   AND ito.itoquantidade>0'
      '  ORDER BY orc.orcchave, gripedidoaux ;')
    Left = 362
    Top = 395
    ParamData = <
      item
        DataType = ftUnknown
        Name = 'cznchave'
        Value = nil
      end>
    object immauxorcchave: TIntegerField
      FieldName = 'orcchave'
    end
    object immauxfoacodigo: TIntegerField
      FieldName = 'foacodigo'
      Required = True
    end
    object immauxstocodigo: TIntegerField
      FieldName = 'stocodigo'
      Required = True
    end
    object immauxrelarquivo: TBlobField
      FieldName = 'relarquivo'
      ReadOnly = True
    end
    object immauxorcobs: TStringField
      FieldName = 'orcobs'
      Size = 250
    end
    object immauxorcgeralav: TFloatField
      FieldName = 'orcgeralav'
      Required = True
    end
    object immauxgricodigo: TIntegerField
      FieldName = 'gricodigo'
    end
    object immauxgrpcodigo: TIntegerField
      FieldName = 'grpcodigo'
    end
    object immauximmchave: TIntegerField
      FieldName = 'immchave'
    end
    object immauximmnumepedido: TIntegerField
      FieldName = 'immnumepedido'
    end
  end
  object tmVerificarStatusImpressoras: TTimer
    Enabled = False
    Interval = 5000
    OnTimer = tmVerificarStatusImpressorasTimer
    Left = 88
    Top = 393
  end
end
